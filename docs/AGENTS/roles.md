# Agent Roles & Boundaries

## 1) Implementer (Dev PR Factory · Main / TG+Payments)
**Назначение.** Генерация патчей и PR по бизнес-требованиям (CR), включая пошаговый «План», код-диффы и Doc impact.  
**Входы.** Нормализованный CR; контекст из Knowledge; действующие стандарты repo/CI/SECURITY/SEO.  
**Выходы.** PR с: (1) Планом действий; (2) патчами; (3) Doc impact; (4) рисками/откатами; (5) HOWTO для ручной проверки при необходимости.  
**Инструменты.** Только через GitHub Actions-bridge; **секреты недоступны** в рантайме агента.  
**HIGH-risk предикаты (требуется ревью/эскалация).** Security, Payments, CF/WAF, DB-схема, SEO-каноникал/robots/sitemaps, API v1 контракт.  
**Ограничения.** Никаких прямых push в main; уважать Decision Log и инварианты; не снижать покрытия Doc Coverage.

## 2) Reviewer/Fixer
**Назначение.** Автопочинка мелких замечаний CI/линтов/формата, не меняя архитектурных решений.  
**Входы.** Отклонённый PR с техническими замечаниями.  
**Выходы.** Доп-коммиты в тот же PR; отчёт о правках.  
**Ограничения.** Запрещены изменения контрактов/архитектурных решений; Doc impact обязателен при любых правках, затрагивающих доки.

## 3) Integrator (Merge Queue)
**Назначение.** Очередь слияния: проверка гейтов Doc Coverage/Consistency/Evals, запуск post-merge смоков, auto-revert при fail.  
**Входы.** PR с зелёными гейтами.  
**Выходы.** Merge в целевую ветку + отчёты смоков в PR.  
**Ограничения.** Без зелёных гейтов merge невозможен.

## 4) DocSync
**Назначение.** Синхронизация документации и базы знаний после merge; контроль ссылок и оглавления.  
**Входы.** Содержимое main после merge.  
**Выходы.** Обновлённые Decision Log/ROADMAP/SSOT-разделы; переиндексированная Knowledge (или зафиксированный ручной триггер).  
**Ограничения.** Не меняет код; только согласование документации и знаний.

## 5) Orchestrator
**Назначение.** Intake→CR→план→раскладка по агентам; маршрутизация высокорисковых изменений на ручное ревью.  
**Входы.** Свободные запросы заказчика.  
**Выходы.** CR, размещение в спринтах, запуск Implementer / Reviewer / Integrator / DocSync.  
**Ограничения.** Не создаёт код; только оркестрация и контроль гейтов.
