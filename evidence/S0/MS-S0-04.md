# Evidence — MS-S0-04 (CI/CD & GHCR)

Ожидаемые артефакты после **push в main**:
- Workflow run: **Success**, ссылка вида `https://github.com/<org>/<repo>/actions/runs/<RUN_ID>`
- В артефакте `evidence-MS-S0-04` (внутри ранa): файл `evidence-summary.md` с:
  - Run ID, Commit SHA, Conclusion, Timestamp (UTC)
  - Image: `ghcr.io/kestutistreciokas/vinops-tg-bot`
  - Tags: `sha-<SHORT_SHA>`, `latest-ci` (и `pr-<num>` для PR)
  - Digest(ы) из `docker/build-push-action` outputs

Проверка публикации тегов/диджестов (локально у авторизованного проверяющего):
```bash
echo "$GITHUB_TOKEN" | docker login ghcr.io -u <your-gh-user> --password-stdin
docker buildx imagetools inspect ghcr.io/kestutistreciokas/vinops-tg-bot:sha-<SHORT_SHA> | sed -n '1,120p'
docker buildx imagetools inspect ghcr.io/kestutistreciokas/vinops-tg-bot:latest-ci     | sed -n '1,120p'
# при наличии PR:
docker buildx imagetools inspect ghcr.io/kestutistreciokas/vinops-tg-bot:pr-<num>      | sed -n '1,120p'

---

## Run evidence (main)
- **Run URL:** https://github.com/KestutisTreciokas/vinops/actions/runs/18230391533
- **Conclusion:** Success
- **Commit SHA:** e64759e08f440d17ecddd2e279a9a6f1f1caac11
- **Triggered:** 2025-10-03 18:20 (as shown in GitHub Actions UI)

## GHCR publication
- **Image:** ghcr.io/kestutistreciokas/vinops-tg-bot
- **Tags:** latest-ci, sha-e64759e
- **Digest (latest-ci / sha-e64759e):** sha256:a85cb4a1eefac16fa689c9cde5d1cd595efd79e2a79e5e60c727f22343f1b385

### How to re-check (QA)
1) Открой страницу run (ссылка выше) и проверь **Success**, SHA и время.  
2) Открой страницу пакета GHCR (Packages → *vinops-tg-bot*), убедись в тегах `latest-ci`, `sha-e64759e` и совпадении digest.  
3) При необходимости проверь через CLI:
   docker buildx imagetools inspect ghcr.io/kestutistreciokas/vinops-tg-bot:latest-ci | sed -n '1,80p'
   docker buildx imagetools inspect ghcr.io/kestutistreciokas/vinops-tg-bot:sha-e64759e | sed -n '1,80p'
